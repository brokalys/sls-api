type Query {
  properties(filter: PropertyFilter, limit: Int): Properties!
  buildings(bounds: String, id: Int): [Building!]!
}

input PropertyFilter {
  created_at: FilterString
  published_at: FilterString
  location_classificator: FilterString
  region: FilterString
  category: FilterString
  type: FilterString
  rent_type: FilterString
  price: FilterInt
  rooms: FilterInt
  area: FilterInt
  floor: FilterInt
  source: FilterString
  url: FilterString
  foreign_id: FilterString
}

type PropertySummary {
  count: Int!
  price(discard: Float): PropertyPriceSummary!
}

type PropertyPriceSummary {
  count: Int
  min: Int
  max: Int
  mean: Int
  median: Int
  mode: Int
  standardDev: Int
}

type PropertyData {
  id: Int!
  url: String!
  content: String!
  images: [String]!
  price: Float
  price_per_sqm: Float
  rooms: Int
  area: Float
  lat: Float
  lng: Float
  foreign_id: String
}

type LimitedPropertyData {
  id: Int!
  category: String!
  type: String!
  rent_type: String
  price: Float!
  price_per_sqm: Float
  rooms: Int
  area: Float
  floor: Int
  published_at: String
}

type Properties {
  results: [PropertyData!]
  summary: PropertySummary
}

type LimitedProperties {
  results: [LimitedPropertyData]!
}

type Building {
  id: Int!
  bounds: String!
  properties: LimitedProperties!
}

input FilterString {
  # equality
  eq: String
  neq: String

  # lexicographical comparison
  gt: String
  gte: String
  lt: String
  lte: String

  in: [String]
  nin: [String]
}

input FilterInt {
  # equality
  eq: Int
  neq: Int

  # lexicographical comparison
  gt: Int
  gte: Int
  lt: Int
  lte: Int

  in: [Int]
  nin: [Int]
}
